<h2 class="ui dividing header">Registered User</h2>

<div class="ui grid" ng-controller="ProfileEditCtrl as profileCtrl">

    <div class="three wide column">

        <img src="/assets/images/avatar.png" alt="Profile Picture" ng-src="{{ profileCtrl.user.avatar.absolutePath }}" class="ui image" />

        <br/>

        <label for="file" class="ui button"><span>Change Picture</span></label>
        <input id="file" type="file" style="display:none;" multiple="multiple" accept="image/*"
               ng-file-select
               ng-file-change="profileCtrl.uploadAvatar($files)" />
    </div>

    <div class="six wide column">

        <form name="profileCtrl.form" novalidate="novalidate" class="ui form">

            <div class="field required">
                <label>Display Name</label>
                <div class="ui input">
                    <input type="text" placeholder="Your public display name" name="displayName" ng-model="profileCtrl.user.displayName" required="required"/>
                </div>
                <div ng-messages="profileCtrl.form.displayName.$error" ng-if="profileCtrl.form.displayName.$touched || profileCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Please enter your display name</div>
                </div>
            </div>

            <div class="field required">
                <label>Email</label>
                <div class="ui input">
                    <input type="email" placeholder="Email" name="email" ng-model="profileCtrl.user.email" required="required"/>
                </div>
                <div ng-messages="profileCtrl.form.email.$error" ng-if="profileCtrl.form.email.$touched || profileCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Please enter your email address</div>
                    <div ng-message="email" class="ui red pointing prompt label transition visible">The email entered is not valid</div>
                </div>
            </div>

            <div class="field required">
                <label>Real Name</label>
                <div class="ui input">
                    <input type="text" placeholder="Your real name" name="name" ng-model="profileCtrl.user.name" required="required"/>
                </div>
                <div ng-messages="profileCtrl.form.name.$error" ng-if="profileCtrl.form.name.$touched || profileCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Please enter your real name</div>
                </div>
            </div>

            <div class="field">
                <label>Birthday</label>
                <div class="ui grid three column">
                    <div id="day" class="column">
                        <select class="ui search dropdown">
                            <option value="">Day</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                            <option value="24">24</option>
                            <option value="25">25</option>
                            <option value="26">26</option>
                            <option value="27">27</option>
                            <option value="28">28</option>
                            <option value="29">29</option>
                            <option value="30">30</option>
                            <option value="31">31</option>
                        </select>
                    </div>

                    <div id="month" class="column">
                        <select class="ui search dropdown">
                            <option value="">Month</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>

                    <div id="year" class="column">
                        <select class="ui search dropdown">
                            <option value="">Year</option>
                            <option value="2010">2010</option>
                            <option value="2009">2009</option>
                            <option value="2008">2008</option>
                            <option value="2007">2007</option>
                            <option value="2006">2006</option>
                            <option value="2005">2005</option>
                            <option value="2004">2004</option>
                            <option value="2003">2003</option>
                            <option value="2002">2002</option>
                            <option value="2001">2001</option>
                            <option value="2000">2000</option>
                        </select>
                    </div>
                </div>
                <div ng-if="profileCtrl.showBirthdayValidationError && profileCtrl.form.submitted">
                    <div class="ui red pointing prompt label transition visible">Please select a valid day, month and year</div>
                </div>
            </div>

            <div class="field">
                <label>Website</label>
                <div class="ui input">
                    <input type="url" placeholder="Website" name="website" ng-model="profileCtrl.user.website"/>
                </div>
                <div ng-messages="profileCtrl.form.website.$error" ng-if="profileCtrl.form.website.$touched || profileCtrl.form.submitted">
                    <div ng-message="url" class="ui red pointing prompt label transition visible">Please enter a valid link</div>
                </div>
            </div>

            <div class="field">
                <label>Location</label>
                <div class="ui input">
                    <input type="text" placeholder="Location" name="location" ng-model="profileCtrl.user.location"/>
                </div>
            </div>

            <div class="field">
                <label>About Me</label>
                <div class="ui input">
                    <textarea name="location" ng-model="profileCtrl.user.bio"></textarea>
                </div>
            </div>

            <button type="button" ng-click="profileCtrl.update(profileCtrl.user)" class="ui submit button">Save Changes</button>
        </form>
    </div>

    <div ng-controller="PasswordResetCtrl as paaswordCtrl" class="five wide column">

        <h3 class="ui header dividing">Change Password</h3>

        <form name="paaswordCtrl.form" novalidate="novalidate" class="ui form">

            <div class="field required">
                <label>Old Password</label>
                <div class="ui input">
                    <input type="password" placeholder="Old Password" name="oldPassword" ng-model="paaswordCtrl.data.oldPassword" required="required"/>
                </div>
                <div ng-messages="paaswordCtrl.form.oldPassword.$error" ng-if="paaswordCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Please enter your old password</div>
                </div>
            </div>

            <div class="field required">
                <label>New Password</label>
                <div class="ui input">
                    <input type="password" placeholder="New Password" name="newPassword" ng-model="paaswordCtrl.data.newPassword" required="required" minlength="5"/>
                </div>
                <div ng-messages="paaswordCtrl.form.newPassword.$error" ng-if="paaswordCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Please enter a new address</div>
                    <div ng-message="minlength" class="ui red pointing prompt label transition visible">The password is too short (Minimum 5 characters required)</div>
                </div>
            </div>

            <div class="field required">
                <label>Confirm New Password</label>
                <div class="ui input">
                    <input type="password" placeholder="Confirm New Password" name="confirmPassword" ng-model="paaswordCtrl.data.confirmPassword" required="required"/>
                </div>
                <div ng-messages="paaswordCtrl.form.confirmPassword.$error" ng-if="paaswordCtrl.form.submitted">
                    <div ng-message="required" class="ui red pointing prompt label transition visible">Password & confirm password doesn't match</div>
                </div>
            </div>

            <button type="button" ng-click="paaswordCtrl.changePassword(paaswordCtrl.data)" class="ui submit button">Change Password</button>
        </form>
    </div>
</div>